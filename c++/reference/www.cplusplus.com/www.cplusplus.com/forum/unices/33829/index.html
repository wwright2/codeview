<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>How to give class as argument without ma - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/unices/">UNIX/Linux Programming</a></li>
<li class="here">How to give class as argument without ma</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> How to give class as argument without making copies?</h3><span id="CH_edttl"></span><span class="rootdatPost" title="33829,root,0,-1,9,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg182112"><span title="182112,48752,1023,15,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182112" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm1b0cc62510" title="Sun, 02 Jan 2011 12:40:34 +0000"></span><script type="text/javascript">WhenId('CH_zTm1b0cc62510');</script><noscript>Jan 2, 2011 at 12:40pm UTC</noscript></div>
<div class="dwho"><a href="/user/phoenix911/"><b>phoenix911</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182112">
Hi!<br>
<br>
Such a problem... imagine such a code:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></code></pre></td>
<td class="source"><pre><code><var>class</var> Test1
{
<var>public</var>:
  Test1();<cite>//an empty(fake) constructor</cite>
  ~Test1();
  Initiate(); <cite>// the real constructor</cite>
  <cite>/*some functions here*/</cite>
<var>private</var>:
  Test2 *testing;
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Let in be, that class <span class="auto"><code class="source">Test2</code></span> is the same as Test1. Then, we have some class 3. Let it be, that even Test3 is the same, exept that thing, that it takes in constructor <span class="auto"><code class="source">Test2</code></span> as an agrument. Now, why happens, that is doesn't get a reference to class <b>Test2</b> but start making an independent copy of it??? why I can write such a code and it works:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br></code></pre></td>
<td class="source"><pre><code><var>int</var> main()
{
   <var>int</var> *a;
   <var>int</var> *b;
   a= <var>new</var> <var>int</var>;
   *a = 5;
   b=a;
   *b += 1;
}
It works fine, but when I use <var>class</var> as argument <var>for</var> another <var>class</var>, it failes?(works only <var>if</var> to run AGAIN Iniate() command?)
</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
As fat as I know, in this case "testing" should be not a data it self, but a memory adress, where this class locates. So what could be problem in?<br>
I even tried to use "static" before declaration, but it resulted in an error:<br>
<span class="auto"><code class="source">../Libraries/libMonolith.so: undefined reference to `Monolith::tesla<kbd>' </kbd></code></span>
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmbd470e5969" title="Sun, 02 Jan 2011 12:48:07 +0000"></span><script type="text/javascript">WhenId('CH_zTmbd470e5969');</script><noscript>Jan 2, 2011 at 12:48pm UTC</noscript></span>
<span class="dbtn" id="CH_btn182112"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg182271"><span title="182271,48938,255,43,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182271" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm1a490ad5c6" title="Sun, 02 Jan 2011 21:23:51 +0000"></span><script type="text/javascript">WhenId('CH_zTm1a490ad5c6');</script><noscript>Jan 2, 2011 at 9:23pm UTC</noscript></div>
<div class="dwho"><a href="/user/kspangsege/"><b>kspangsege</b> (43)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182271">
Please post the version where you 'use class as argument for another class'. That will help us understand your problem.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm3b124e9112" title="Sun, 02 Jan 2011 21:24:13 +0000"></span><script type="text/javascript">WhenId('CH_zTm3b124e9112');</script><noscript>Jan 2, 2011 at 9:24pm UTC</noscript></span>
<span class="dbtn" id="CH_btn182271"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg182351"><span title="182351,48752,1023,15,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182351" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm00a2eadafc" title="Mon, 03 Jan 2011 05:06:19 +0000"></span><script type="text/javascript">WhenId('CH_zTm00a2eadafc');</script><noscript>Jan 3, 2011 at 5:06am UTC</noscript></div>
<div class="dwho"><a href="/user/phoenix911/"><b>phoenix911</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182351">
Here is a part of constructor(this class is some kind of programm kernel)<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code>    Tesla *tesla;
    tesla = <var>new</var> Tesla; <cite>//initializing class</cite>
    
    orator = <var>new</var> Orator(tesla); <cite>/*initializing addon class with class as agrument. HERE, istead of taking "tesla" adress, it runs "NEW" AGAIN!!!!!*/</cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Here is another class<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br></code></pre></td>
<td class="source"><pre><code><var>class</var> Orator
{
	<var>public</var>:
		Orator(Tesla *database); <cite>//Here class constructor accepts as argument another class.</cite>
		~Orator();
		string *GetWord(string *definition);
		string *GetWord(string definition);
	<var>private</var>:
		<var>void</var> GenerateWordList();
		IceGrid *words;
		<var>int</var> *word_pos;
		string *language;
		Tesla *tesla;
		string *querry;
		<var>int</var> *column;
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
If it's better to understand, here is a "Orator"'s constructor<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code>Orator(Tesla *database)
{
      tesla = database;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Here is a class, that is being given as an argument:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br></code></pre></td>
<td class="source"><pre><code><var>class</var> Tesla {

	<var>public</var>:
		Tesla();
		~Tesla();

		<var>int</var> Turbo(string query, IceGrid *grid);
		<var>int</var> Fellix(string query, IceGrid *grid, <var>int</var> start_field);
		<var>int</var> Injet(string query);
		<var>int</var> *Records;
		<var>int</var> *Fields;
	<var>private</var>:
		<var>int</var> GetTesla();
		<var>int</var> Establish();
		MYSQL *mysql;
		<var>char</var> *host;
		<var>char</var> *user;
		<var>char</var> *pass;
		<var>char</var> *database;	
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Here is constructor for Tesla:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></code></pre></td>
<td class="source"><pre><code>Tesla::Tesla()
{
	GetTesla();
	mysql = <var>new</var> MYSQL;
	mysql_init(mysql);
	Establish();
	Records = <var>new</var> <var>int</var>;
	Fields = <var>new</var> <var>int</var>;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
I tried to move this constructor strings to separate functions, to test what a hell is going on, and why I do not win in performance nothing.... It started crashing(in class that get's tesla as agrument, tesla is NULL! without reinitializing ALL data).<br>
then, I tried to put <span class="auto"><code class="source"> cout&lt;&lt;<kbd>"Duplicated run"</kbd>&lt;&lt;endl;</code></span> in <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code>		<var>int</var> GetTesla();
		<var>int</var> Establish();</code></pre></td><td class="C_btnholder"></td></tr></table></div>
 functions. And I saw over 100! of such reruns.<br>
<br>
So, when <b>tesla</b> is given as agrument to another class, it starts running <b>new</b> instead of using already cteated!<br>
One more note... all this classes are built as shared libraries, that are staticaly linked(in mean in CMakeLists.txt set as link_library() ).<br>
I tired of wondering what could be wrong. As you noticed <b>Tesla</b> is mysql driver. And if it always creates new copies it's terrifull waste or resources and memory.<br>
<br>
PS. Such a fair, that Tesla *tesla reffers not to Tesla, but to <b>new</b> Tesla;<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmbe90f72721" title="Mon, 03 Jan 2011 05:59:00 +0000"></span><script type="text/javascript">WhenId('CH_zTmbe90f72721');</script><noscript>Jan 3, 2011 at 5:59am UTC</noscript></span>
<span class="dbtn" id="CH_btn182351"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg182363"><span title="182363,18360,1023,13765,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182363" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm5268c4e6ce" title="Mon, 03 Jan 2011 07:07:54 +0000"></span><script type="text/javascript">WhenId('CH_zTm5268c4e6ce');</script><noscript>Jan 3, 2011 at 7:07am UTC</noscript></div>
<div class="dwho"><a href="/user/Disch/"><b>Disch</b> (13765)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182363">
You are making false assumptions.<br>
<br>
<table class="quote"><tr><td class="qd">/*initializing addon class with class as agrument. HERE, istead of taking "tesla" adress, it runs "NEW" AGAIN!!!!!*/</td></tr></table><br>
<br>
^  This is false.  That code you posted is not creating another Tesla.  It is running new, but only to create a new Orator.<br>
<br>
Have you checked to make sure that the program even gets to the new Orator line?  What might be happening is that Tesla's ctor is creating new Teslas somehow.<br>
<br>
Check GetTesla, Establish, and MYSQL's ctor and make extra sure none of them are creating any new Teslas (either with new, or on the stack).<br>
<br>
EDIT:  although MYSQL is probably some other lib, so you probably don't have to worry about that.  Maybe just show us GetTesla and Establish.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmffeb4483b8" title="Mon, 03 Jan 2011 07:08:59 +0000"></span><script type="text/javascript">WhenId('CH_zTmffeb4483b8');</script><noscript>Jan 3, 2011 at 7:08am UTC</noscript></span>
<span class="dbtn" id="CH_btn182363"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg182371"><span title="182371,48752,1023,15,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182371" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm2e406d7478" title="Mon, 03 Jan 2011 07:38:51 +0000"></span><script type="text/javascript">WhenId('CH_zTm2e406d7478');</script><noscript>Jan 3, 2011 at 7:38am UTC</noscript></div>
<div class="dwho"><a href="/user/phoenix911/"><b>phoenix911</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182371">
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br></code></pre></td>
<td class="source"><pre><code><var>int</var> Tesla::GetTesla()
{
	TeslaLogin *Login;
	Login = <var>new</var> TeslaLogin;
	ifstream config(<kbd>"./.config/tesla.dat"</kbd>, ios::in);
	<var>if</var>(!config)
	  {
		cout&lt;&lt;<kbd>"Database config file error!"</kbd>&lt;&lt;endl;
		exit(1);
	  }
	config.read(<var>reinterpret_cast</var>&lt;<var>char</var> *&gt;(Login), <var>sizeof</var>(*Login));
	host = <var>new</var> <var>char</var>[ strlen(Login-&gt;Host) +1 ];
	strcpy(host, Login-&gt;Host);
	user = <var>new</var> <var>char</var>[ strlen(Login-&gt;User) +1 ];
	strcpy(user, Login-&gt;User);
	pass = <var>new</var> <var>char</var>[ strlen(Login-&gt;Pass) +1 ];
	strcpy(pass, Login-&gt;Pass);
	database = <var>new</var> <var>char</var>[ strlen(Login-&gt;Data) +1 ];
	strcpy(database, Login-&gt;Data);
	<var>delete</var> Login;
}
<var>int</var> Tesla::Establish()
{

<var>if</var>(!(mysql_real_connect(mysql, host, user, pass, database, 0, NULL, 0)))
{
	cout&lt;&lt;<kbd>"MYSQL connection error"</kbd>&lt;&lt;endl;
	cout&lt;&lt;endl;
	exit(1);
}
<var>else</var>
{
    mysql_set_character_set(mysql, <kbd>"utf8"</kbd>);
}

<var>delete</var> [] host;
<var>delete</var> [] user;
<var>delete</var> [] pass;
<var>delete</var> [] database;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Maybe I'm an idiot, but no new teslas created here. I 100% sure say to you, that when only tesla is given as an argument, it runs it all again and again. It I cut these 2 fuctions shown abowe form constructor to any 3-rd, and make it run manually, then it works only once, and as only given as an argument = &gt; segmentation fault. Cause it makes NEW copies and if not to allow rerun there 2 functions = &gt; pointers remain undefined!<br>
<br>
By the way... MYQSL - is a connector to MySQL database provided by MySQL AB company, it just cant't have any access to tesla, as far, as they couldn't know what libraries will I create based on it.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm0ae15937ae" title="Mon, 03 Jan 2011 07:48:18 +0000"></span><script type="text/javascript">WhenId('CH_zTm0ae15937ae');</script><noscript>Jan 3, 2011 at 7:48am UTC</noscript></span>
<span class="dbtn" id="CH_btn182371"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg182375"><span title="182375,48752,1023,15,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg182375" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmfa62187530" title="Mon, 03 Jan 2011 08:02:48 +0000"></span><script type="text/javascript">WhenId('CH_zTmfa62187530');</script><noscript>Jan 3, 2011 at 8:02am UTC</noscript></div>
<div class="dwho"><a href="/user/phoenix911/"><b>phoenix911</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i182375">
And by the way... if I make a wrong assumptions, then why, if in GetTesla() or Establish() I add string "cout&lt;&lt;"hello world"&lt;&lt;endl;"<br>
I get entire page full of this text? Isn't a proof, that new, new and new teslas are created?
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn182375"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg183028"><span title="183028,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg183028" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmc591b639c9" title="Wed, 05 Jan 2011 11:52:01 +0000"></span><script type="text/javascript">WhenId('CH_zTmc591b639c9');</script><noscript>Jan 5, 2011 at 11:52am UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i183028">
Nope.<br>
Post <span class="auto"><code class="source">TeslaLogin::TeslaLogin()</code></span> code<br>
<br>
If you want to count the instances of a class, use an static counter that increments in every constructor, [and decrements in the destructor].<br>
<br>
BTW: is it necessary the dynamic allocation?<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br></code></pre></td>
<td class="source"><pre><code>Records = <var>new</var> <var>int</var>;
Fields = <var>new</var> <var>int</var>;
Login = <var>new</var> TeslaLogin;</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Edit: Do you get an stack overflow? Does the program end?<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmcdd6e51293" title="Wed, 05 Jan 2011 12:04:20 +0000"></span><script type="text/javascript">WhenId('CH_zTmcdd6e51293');</script><noscript>Jan 5, 2011 at 12:04pm UTC</noscript></span>
<span class="dbtn" id="CH_btn183028"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg183361"><span title="183361,48752,1023,15,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg183361" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm9cfdd8496e" title="Thu, 06 Jan 2011 17:34:30 +0000"></span><script type="text/javascript">WhenId('CH_zTm9cfdd8496e');</script><noscript>Jan 6, 2011 at 5:34pm UTC</noscript></div>
<div class="dwho"><a href="/user/phoenix911/"><b>phoenix911</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i183361">
1) You're mistaken. TeslaLogin - is not a class. It's a simple struct, that has 4 variables for storing host, pass, database and login information.<br>
<br>
Declaration looks like this:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code><var>struct</var> TeslaLogin {
<var>char</var> login[40];
<var>char</var> pass[40];
<var>char</var> host[40];
<var>char</var> database[40];
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
As you see, it's a simple struct for storing data. No functions ot constructors at all.<br>
<br>
<table class="quote"><tr><td class="qd">Edit: Do you get an stack overflow? Does the program end?</td></tr></table><br>
No. Well, seems I explained badly my problem. Well... Imagine, I have Firefox brobser. It has module support. It would be bad, if each module for example should redowload each page you visit to work with data, isn't it? The same story here. I need only one database connection to setup per all modules and entire program.<br>
<br>
But... It crashes after second level or I need to make constructor to recreate entire class each time in automatic mode.<br>
<br>
Take a look... Programm starts, I connect to DB(DataBase), then, I store it as *DB type(pointer). Then, fuctions and classes are quite a lot, over 30 000 of programm code(I mean all CPP, not H files).<br>
Then, it should work as this:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></code></pre></td>
<td class="source"><pre><code>SomeClass *test1;
test1 = <var>new</var> SomeClass;
<cite>//THE ONLY INITIALIZATION</cite>
RunTest1(test1);

RunTest1(SomeClass *test)
{
<cite>///SOME ACTIONS HERE</cite>
RunTest2(test); <cite>////HERE CLASS POINTER DATA IN SOME REASONS LOST</cite>
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
 <br>
<br>
Hope this time I made myself clear. I need some data to initialize only once peer all program, no matter how many times and how deep this usage goes. But after second level class begins creating "new" instead of using already existing.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn183361"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg183376"><span title="183376,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg183376" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm44bb0bb83e" title="Thu, 06 Jan 2011 19:28:20 +0000"></span><script type="text/javascript">WhenId('CH_zTm44bb0bb83e');</script><noscript>Jan 6, 2011 at 7:28pm UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i183376">
I dunno why are you creating those instances.<br>
<table class="quote"><tr><td class="qd">I need some data to initialize only once peer all program, no matter how many times and how deep this usage goes.</td></tr></table><br>
Maybe try Singleton pattern (example <a href="http://www.yolinux.com/TUTORIALS/C++Singleton.html">http://www.yolinux.com/TUTORIALS/C++Singleton.html</a> )
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn183376"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(33829,1,48752,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript">
    google_ad_client = "ca-pub-1444228343479937";
    google_ad_slot = "9701143201";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<!-- leaderboard -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li class="selected"><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Funices%2F33829%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>