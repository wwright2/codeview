<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>[faq] undefined reference - unresolved e - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/general/">General C++ Programming</a></li>
<li class="here">[faq] undefined reference - unresolved e</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico comment" title="comment">&nbsp;</div> [faq] undefined reference - unresolved external</h3><span id="CH_edttl"></span><span class="rootdatPost" title="113904,root,0,-1,6,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg622040"><span title="622040,37152,1023,8201,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622040" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmb02660e59f" title="Thu, 17 Oct 2013 23:15:06 +0000"></span><script type="text/javascript">WhenId('CH_zTmb02660e59f');</script><noscript>Oct 17, 2013 at 11:15pm UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622040">
<table class="quote"><tr><th class="qh"><strong>nolyc</strong> wrote:</th></tr><tr><td class="qd">Undefined reference is a linker error not a compile error.<br>
You did not define the thing in the error message, you forgot to link the file that defines it, you forgot to link to the library that defines it, or, if it's a static library, you have the wrong order on the linker command line.<br>
Check which one. <br>
(Note that some linkers call it an unresolved external)</td></tr></table><br>
<br>
To understand this error, first you need to understand the build process.<br>
Sources are not transformed directly into an executable. Instead, `object files' are created from them (compilation) and then those object files are "merged" to create the executable (linking)<br>
This reduces the building time, because if one source was not modified, then there is no reason to reanalyze it (recompile it)<br>
<br>
Each object files contains a list of symbols. Those symbols are the global variables and functions that its source defined, and also functions and variables that were referenced but that no definition was found during compilation. (you can list the symbols with the `nm' program.)<br>
<br>
The linker will later fix those calls with the information given by the the other object files. However, if it does not found what a function is supposed to do, then it would complain with the `undefined reference' error.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn622040"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg622050"><span title="622050,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622050" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmdc166e0048" title="Thu, 17 Oct 2013 23:31:27 +0000"></span><script type="text/javascript">WhenId('CH_zTmdc166e0048');</script><noscript>Oct 17, 2013 at 11:31pm UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622050">
<div class="centertext"><b>You did not define the thing in the error message</b></div>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br></code></pre></td>
<td class="source"><pre><code><var>class</var> A{
<var>public</var>:
   <var>static</var> <var>int</var> value;
};

<var>int</var> foo(<var>int</var>, <var>int</var>);
<var>int</var> bar();

<var>int</var> main(){
   <var>return</var> foo(bar(), A::value);
}

<var>int</var> bar(<var>int</var> n){
   <var>return</var> 13;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
That snips compiles perfectly <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ -c foo.cpp</samp></pre></td></tr></table></div> But it would fail at the linking stage <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ foo.o -o program.bin
foo.o: In function `main':
foo.cpp:(.text+0xb): undefined reference to `A::value'
foo.cpp:(.text+0x10): undefined reference to `bar()'
foo.cpp:(.text+0x19): undefined reference to `foo(int, int)'
collect2: error: ld returned 1 exit status</samp></pre></td></tr></table></div> Note that we are declaring and calling a `bar()' function that receives no argument, but the one that is defined in line 13 ask for an integer. Because the prototypes don't match they are actually two different functions.<br>
<br>
The body for `foo()' is nowhere to be found.<br>
<br>
Note that we are not defining the variable in line 3. We are just telling, there is a class attribute called value of type integer, but it was never created.<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></code></pre></td>
<td class="source"><pre><code><var>class</var> A{
   <var>public</var>:
      <var>static</var> <var>int</var> value;
};

<var>int</var> foo(<var>int</var>, <var>int</var>){<var>return</var> 0;} <cite>//providing a body</cite>
<var>int</var> bar();

<var>int</var> main(){
   <var>return</var> foo(bar(), A::value);
}

<var>int</var> bar(){ <cite>//prototypes must match</cite>
   <var>return</var> 13;
}

<var>int</var> A::value = 42; <cite>//creating the class attribute </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
would build correctly
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn622050"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg622055"><span title="622055,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622055" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTma518987f6c" title="Thu, 17 Oct 2013 23:39:39 +0000"></span><script type="text/javascript">WhenId('CH_zTma518987f6c');</script><noscript>Oct 17, 2013 at 11:39pm UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622055">
<div class="centertext"><b>You forgot to link the file that defines it</b></div>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code><cite>//foo.cpp</cite>
<var>int</var> bar(<var>int</var> n);

<var>int</var> main(){
   <var>return</var> bar(42);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code><cite>//bar.cpp</cite>
<var>int</var> bar(<var>int</var> n){
   <var>return</var> n*n;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
Here we put a function definition in another file (note that the prototype is respected)<br>
<div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ -c foo.cpp
$ g++ foo.o
foo.o: In function `main':
foo.cpp:(.text+0xa): undefined reference to `bar(int)'
collect2: error: ld returned 1 exit status</samp></pre></td></tr></table></div>It failed because we never tell it to look in bar.cpp for that function definition.<br>
So the correct build process would be <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ -c foo.cpp
$ g++ -c bar.cpp
$ g++ foo.o bar.o -o program.bin</samp></pre></td></tr></table></div><br>
<br>
If you are using an IDE, then it would be equivalent to adding the source to the project<br>
(RTFM to know how to do it)
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm0df1fbb8c1" title="Thu, 17 Oct 2013 23:40:57 +0000"></span><script type="text/javascript">WhenId('CH_zTm0df1fbb8c1');</script><noscript>Oct 17, 2013 at 11:40pm UTC</noscript></span>
<span class="dbtn" id="CH_btn622055"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg622060"><span title="622060,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622060" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm6d45b38be3" title="Thu, 17 Oct 2013 23:58:41 +0000"></span><script type="text/javascript">WhenId('CH_zTm6d45b38be3');</script><noscript>Oct 17, 2013 at 11:58pm UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622060">
<div class="centertext"><b>You forgot to link to the library that defines it</b></div><br>
For our purposes libraries or objects files are equivalent. Both define symbols that we need, so we must indicate that to the linker.<br>
<br>
Suppose that we are trying to use SFML, and are receiving this error <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>undefined reference to `sf::Clock::Clock()'</samp></pre></td></tr></table></div> We figure out that the definition is in `/usr/lib/libsfml-system.so' so to build we simply do <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ foo.o /usr/lib/libsfml-system.so -o program.bin</samp></pre></td></tr></table></div><br>
<br>
Because the file names of the libraries and the different path were they may be follow a convention, g++ provides a shortcut with the -l flag (lowercase L). So instead we could <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>$ g++ foo.o -lsfml-system -o program.bin</samp></pre></td></tr></table></div><br>
<br>
Libraries may depend on other libraries, so figuring out all the files that we need to link against may be too much work. You could use the `pkg-config' program to retrieve that information <div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>g++ foo.o $(pkg-config --libs sfml-all)</samp></pre></td></tr></table></div>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn622060"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg622062"><span title="622062,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622062" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm18693b78db" title="Fri, 18 Oct 2013 00:07:10 +0000"></span><script type="text/javascript">WhenId('CH_zTm18693b78db');</script><noscript>Oct 18, 2013 at 12:07am UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622062">
<div class="centertext"><b>If it's a static library, you have the wrong order on the linker command line</b></div><br>
We say that library A depends on library B, if A has some undefined symbols for which B provides a definition.<br>
In that case A must be before than B, so the linker can know what definitions are missing and look up them on B.<br>
<br>
Again, the use of `pkg-config' is suggested
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn622062"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg622073"><span title="622073,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg622073" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm99a407816f" title="Fri, 18 Oct 2013 00:23:09 +0000"></span><script type="text/javascript">WhenId('CH_zTm99a407816f');</script><noscript>Oct 18, 2013 at 12:23am UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i622073">
<div class="centertext"><b>Templates and inline functions</b></div><br>
This is actually an especial case of `you did not define the thing in the error message'<br>
The code for templates is generated on-demand. So if you have <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></code></pre></td>
<td class="source"><pre><code><cite>//foo.cpp</cite>
<var>template</var>&lt;<var>class</var> T&gt;
T min(T a, T b){
   <var>if</var>(a&lt;b) <var>return</var> a;
   <var>return</var> b;
}

<var>int</var> main(){
   min(42,54);
   min(3.14, 2.72);
   min(<kbd>"hello"</kbd>, <kbd>"world"</kbd>);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
 It would generate function definition for <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br></code></pre></td>
<td class="source"><pre><code><var>char</var> <var>const</var>* min&lt;<var>char</var> <var>const</var>*&gt;(<var>char</var> <var>const</var>*, <var>char</var> <var>const</var>*) <cite>//the reader surely found a logic issue with this one</cite>
<var>double</var> min&lt;<var>double</var>&gt;(<var>double</var>, <var>double</var>)
<var>int</var> min&lt;<var>int</var>&gt;(<var>int</var>, <var>int</var>)</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
However, if put the function definition in another source <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code><cite>//foo.cpp</cite>
<var>template</var>&lt;<var>class</var> T&gt;
T min(T a, T b){
   <var>if</var>(a&lt;b) <var>return</var> a;
   <var>return</var> b;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
the correspondent object file would have nothing.<br>
<br>
The definition of a template (or inline) function must be available to all the sources that use them. Put them in the header.<br>
<br>
<br>
There is actually possible to make foo.o contain the definition that we want. See `explicit template instantiation' <a href="http://www.cplusplus.com/forum/articles/14272/">http://www.cplusplus.com/forum/articles/14272/</a>
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmbd1d15c967" title="Fri, 18 Oct 2013 00:25:27 +0000"></span><script type="text/javascript">WhenId('CH_zTmbd1d15c967');</script><noscript>Oct 18, 2013 at 12:25am UTC</noscript></span>
<span class="dbtn" id="CH_btn622073"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(113904,1,37152,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript">
    google_ad_client = "ca-pub-1444228343479937";
    google_ad_slot = "9701143201";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<!-- leaderboard -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li class="selected"><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Fgeneral%2F113904%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>