<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Dynamic Arrays: Need Help Copying One Ar - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/general/">General C++ Programming</a></li>
<li class="here">Dynamic Arrays: Need Help Copying One Ar</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Dynamic Arrays: Need Help Copying One Array To Another One</h3><span id="CH_edttl"></span><span class="rootdatPost" title="185296,root,0,-1,3,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg904867"><span title="904867,201696,255,1,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg904867" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm78e25252c2" title="Wed, 24 Feb 2016 02:06:48 +0000"></span><script type="text/javascript">WhenId('CH_zTm78e25252c2');</script><noscript>Feb 24, 2016 at 2:06am UTC</noscript></div>
<div class="dwho"><a href="/user/geezer12/"><b>geezer12</b> (1)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i904867">
Hello,<br>
<br>
<br>
I have to create a program that uses the ‘new’ operator to create a dynamic array in heap of the program. The program creates and populates its dynamic array one (int) elements at a time for each input data (cin). <br>
<br>
Key parts of the assignment. <br>
<br>
Hello,<br>
<br>
I have to create a program that uses the 'new' operator to create a dynamic array in heap of the program. The program creates and populates its dynamic array one (int) elements at a time for each input data (cin).<br>
<br>
Key parts.<br>
<br>
1.) Program has to used "cin &gt;&gt;" for data input to accept on integer at a time until EOF is pressed on the keyboard (cntrl-z for windows).<br>
<br>
2.) User input has to be tested using !cin.eof() &amp;&amp; cin.good() to test whether or not the EOF key was pressed and if the data is valid. (kinda of confused about the cin.good() part).<br>
<br>
3.) The program will create a series of longer and longer arrays to contain all previous elements and the current incoming one. Also, the program will delete the previous version of the array after completing the current version.<br>
<br>
4.) The program also tests if heap memory has been exhausted after each use of the new operator. (need help with this)<br>
<br>
I keep getting error message "HEAP CORRUPTION DETECTOR After normal black (#146)" (visual studio). What's the issue?<br>
<br>
Thanks in advance!<br>
<br>
Here's the code:<br>
Here’s what I have so far.<br>
<br>
I keep getting error message “HEAP CORRUPTION DETECTOR After normal black (#146)” (visual studio). What’s the issue? <br>
<br>
<br>
Thanks in advance<br>
<br>
<br>
<br>
&lt;#include &lt;iostream&gt; <br>
#include &lt;iomanip&gt;<br>
#include &lt;cstdlib&gt;<br>
#include &lt;cassert&gt;<br>
<br>
using namespace std;<br>
<br>
<br>
// main<br>
int main() {<br>
	int size = 2;<br>
	int * array1 = new int[size];<br>
	int arrayInput;<br>
	int count = 0;<br>
<br>
<br>
		do {<br>
<br>
<br>
			if (array1 != NULL) {<br>
<br>
				cout &lt;&lt; "Enter an integer (EOF to stop): " &lt;&lt; endl;<br>
				cin &gt;&gt; arrayInput;<br>
				if (size &lt; count) {<br>
					int * tempArray;<br>
<br>
					tempArray = new int[size * 2];<br>
<br>
					if (tempArray != NULL)<br>
					{<br>
						for (int i = 0; i &lt; size; i++) {<br>
							array1[i] = tempArray[i];<br>
						}<br>
						delete[] array1;<br>
						array1 = tempArray;<br>
						size *= 2;<br>
<br>
						delete [] tempArray;<br>
<br>
					}<br>
					else<br>
						cout &lt;&lt; "Insufficient Heap resource." &lt;&lt; endl;  // If we get here the Heap is out of space<br>
				}<br>
				if (!cin.eof()) {<br>
					array1[count++] = arrayInput;<br>
				}<br>
			}<br>
			else<br>
				cout &lt;&lt; "Insufficient Heap resource." &lt;&lt; endl;  // If we get here the Heap is out of space<br>
<br>
		<br>
<br>
<br>
<br>
		} while (!cin.eof());<br>
<br>
<br>
		for (int i = 0; i &lt; count; i++) {<br>
			cout &lt;&lt; array1[i] &lt;&lt; endl;<br>
		}<br>
<br>
<br>
	<br>
}<br>
<br>
<br>
&gt;<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm488562eab0" title="Wed, 24 Feb 2016 02:11:33 +0000"></span><script type="text/javascript">WhenId('CH_zTm488562eab0');</script><noscript>Feb 24, 2016 at 2:11am UTC</noscript></span>
<span class="dbtn" id="CH_btn904867"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg904879"><span title="904879,37152,1023,8201,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg904879" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm315d942651" title="Wed, 24 Feb 2016 02:54:47 +0000"></span><script type="text/javascript">WhenId('CH_zTm315d942651');</script><noscript>Feb 24, 2016 at 2:54am UTC</noscript></div>
<div class="dwho"><a href="/user/ne555/"><b>ne555</b> (8201)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i904879">
if <span class="auto"><code class="source"><var>new</var></code></span> or <span class="auto"><code class="source"><var>new</var>[]</code></span> fail they will throw an exception. There is no point in checking for NULL.<br>
<br>
For input you may use <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br></code></pre></td>
<td class="source"><pre><code><var>while</var>( std::cin&gt;&gt;input ){
  <cite>//...</cite>
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
it will stop at EOF or input error.<br>
<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></code></pre></td>
<td class="source"><pre><code><var>int</var>* tempArray;
tempArray = <var>new</var> <var>int</var>[size * 2];
<var>for</var> (<var>int</var> i = 0; i &lt; size; i++)
{
	array1[i] = tempArray[i]; <cite>//¿?</cite>
}
<var>delete</var>[] array1;
array1 = tempArray;
size *= 2;
<var>delete</var>[] tempArray; <cite>//¿? </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
kindly explain your intention in the marked lines.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn904879"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg904880"><span title="904880,130771,1023,125,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg904880" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmb718ff4312" title="Wed, 24 Feb 2016 02:56:09 +0000"></span><script type="text/javascript">WhenId('CH_zTmb718ff4312');</script><noscript>Feb 24, 2016 at 2:56am UTC</noscript></div>
<div class="dwho"><a href="/user/Little_Captain/"><b>Little Captain</b> (125)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i904880">
Hi, <br>
<br>
It might be a good idea to surround your code in <div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></code></pre></td>
<td class="source"><pre><code> tags.  This helps make it more legible <var>for</var> us :)

There<kbd>'s a problem with this section:

[code]
array1 = tempArray;
size *=2;

delete[] tempArray; </kbd></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
The problem here, is that both array1 and tempArray <i>point to the same dynamically allocated array</i><br>
<br>
When you use delete[] on tempArray, you are deleting the array that is being pointed to by both tempArray AND array1.<br>
<br>
Then, later in your code, you try to access that array via array1 again, which causes a fail.<br>
<br>
Fix that, first and see what other problems you get.<br>
<br>
Joe:<br>
sparkprogrammer@gmail.com
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn904880"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="/user/">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(185296,0,201696,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li class="selected"><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Fgeneral%2F185296%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>