<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Route planning algorithms - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/lounge/">Lounge</a></li>
<li class="here">Route planning algorithms</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Route planning algorithms</h3><span id="CH_edttl"></span><span class="rootdatPost" title="180864,root,0,-1,8,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg887691"><span title="887691,13171,1023,12617,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887691" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm36ba899a21" title="Thu, 10 Dec 2015 19:17:00 +0000"></span><script type="text/javascript">WhenId('CH_zTm36ba899a21');</script><noscript>Dec 10, 2015 at 7:17pm UTC</noscript></div>
<div class="dwho"><a href="/user/helios/"><b>helios</b> (12617)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887691">
Given a network of nodes and directed edges with costs and benefits associated with traversing the edges, I want to find a route (i.e. a "walk" in graph theory terminology) that maximizes the total benefit and minimizes the total cost. The route should start in a node "near" a reference node.<br>
<br>
Is there a class of algorithms that does this? Even just a search term is fine.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmd33518402c" title="Thu, 10 Dec 2015 19:26:36 +0000"></span><script type="text/javascript">WhenId('CH_zTmd33518402c');</script><noscript>Dec 10, 2015 at 7:26pm UTC</noscript></span>
<span class="dbtn" id="CH_btn887691"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887708"><span title="887708,19724,5119,4176,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887708" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm1a494a47cc" title="Thu, 10 Dec 2015 19:42:45 +0000"></span><script type="text/javascript">WhenId('CH_zTm1a494a47cc');</script><noscript>Dec 10, 2015 at 7:42pm UTC</noscript></div>
<div class="dwho"><a href="/user/TheRabbitologist/"><b>TheRabbitologist</b> (4176)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887708">
Important questions:<br>
Are there any restrictions on how many nodes are visited?<br>
Is there a specified end node?<br>
Are benefit and cost necessarily distinct or can they be combined into net benefit?<br>
How large is your graph?<br>
<br>
-Albatross
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn887708"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887732"><span title="887732,13171,1023,12617,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887732" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm5b0fd6dc03" title="Thu, 10 Dec 2015 20:46:13 +0000"></span><script type="text/javascript">WhenId('CH_zTm5b0fd6dc03');</script><noscript>Dec 10, 2015 at 8:46pm UTC</noscript></div>
<div class="dwho"><a href="/user/helios/"><b>helios</b> (12617)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887732">
1. Yes, the user may input a desired number of edges to traverse (generally &lt;20), and the best route with that many edges should be displayed, or a few of the best routes should be displayed.<br>
2. No, routes may end in any node.<br>
3. No, cost and benefit are incomparable and there is no mapping between the two.<br>
4. Roughly 50k nodes and 500M edges, IIRC. Most edges are very low benefit, though.<br>
<br>
EDIT: Oh, also: The benefit of an edge may in some cases vary depending on which other edges have been previously traversed.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm2ddc946add" title="Thu, 10 Dec 2015 21:15:42 +0000"></span><script type="text/javascript">WhenId('CH_zTm2ddc946add');</script><noscript>Dec 10, 2015 at 9:15pm UTC</noscript></span>
<span class="dbtn" id="CH_btn887732"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887771"><span title="887771,17960,1023,867,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887771" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm38ead3d27b" title="Thu, 10 Dec 2015 22:03:40 +0000"></span><script type="text/javascript">WhenId('CH_zTm38ead3d27b');</script><noscript>Dec 10, 2015 at 10:03pm UTC</noscript></div>
<div class="dwho"><a href="/user/tition/"><b>tition</b> (867)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887771">
I just realized I did not read carefully your formulation. I don't think I have seen an exact answer to your question anywhere, but I'd browse the following topics:<br>
0. The most relevant things I found so far:<br>
<a href="https://en.wikipedia.org/wiki/Shortest_path_problem">https://en.wikipedia.org/wiki/Shortest_path_problem</a><br>
<a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm</a><br>
If you make your benefits negative then you are in fact searching for a shortest path.<br>
<br>
1. <del>This is not directly relevant, but</del> I would read the intro to the Max-Flow-Min-Cut-Theorem<br>
<a href="https://en.wikipedia.org/wiki/Max-flow_min-cut_theorem">https://en.wikipedia.org/wiki/Max-flow_min-cut_theorem</a><br>
<br>
2. I would also browse the wikipedia article on linear optimization/simplex algorithm: that will simply give you more background on/generalizations of the previous topic.  <del> in case you are not happy with the travelling salesman approach, this may help you reformulate your problem to something that may be more approachable. Once again, this is not the original problem you are asking, but if your problem is hard enough, you may need to admit defeat and settle for a simplification.</del><br>
<br>
<br>
2. I'd also review the traveling salesman problem: not sure how relevant is that to your case...<br>
<a href="https://en.wikipedia.org/wiki/Travelling_salesman_problem">https://en.wikipedia.org/wiki/Travelling_salesman_problem</a><br>
<del>I remember that's an NP hard problem, so no expectation of a "good" algorithm. I think your problem is a modification of this problem - a modification that makes it harder than it already is - you seem to be  optimizing against multiple costs functions, not to mention of the possibility that traversing edges modifies the cost function.</del><br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTme142cf3c4d" title="Thu, 10 Dec 2015 22:19:50 +0000"></span><script type="text/javascript">WhenId('CH_zTme142cf3c4d');</script><noscript>Dec 10, 2015 at 10:19pm UTC</noscript></span>
<span class="dbtn" id="CH_btn887771"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887782"><span title="887782,108990,1023,800,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887782" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm83bd989655" title="Thu, 10 Dec 2015 22:43:25 +0000"></span><script type="text/javascript">WhenId('CH_zTm83bd989655');</script><noscript>Dec 10, 2015 at 10:43pm UTC</noscript></div>
<div class="dwho"><a href="/user/booradley60/"><b>booradley60</b> (800)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887782">
Is there any benefit in splitting the problem into two graphs? A graph with only benefit edges and a graph with only cost edges?
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn887782"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887801"><span title="887801,13171,1023,12617,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887801" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm61718c7f82" title="Thu, 10 Dec 2015 23:41:51 +0000"></span><script type="text/javascript">WhenId('CH_zTm61718c7f82');</script><noscript>Dec 10, 2015 at 11:41pm UTC</noscript></div>
<div class="dwho"><a href="/user/helios/"><b>helios</b> (12617)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887801">
booradley60: I don't think that would make sense.<br>
<br>
tition:<br>
0. Now that you mention it, yes, I believe my current solution is equivalent to Dijkstra's algorithm, where the arrival condition is determined solely by the number of edges that have been traversed. Using cost-benefit as the distance function doesn't make sense in this case, though. I'm using -benefit/cost.<br>
My current algorithm is:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></code></pre></td>
<td class="source"><pre><code>1. Find all nodes within a certain radius from <kbd>"home"</kbd>.
2. Find all outgoing edges <var>for</var> those nodes.
3. Reverse sort by benefit.
4. Drop bottom 75%. (This is mainly to ignore the tremendous number of worthless edges.)
5. Reverse sort by benefit/cost.
6. Drop bottom 50%.
(At <var>this</var> point, my test <var>case</var> shows 1M edges remaining.)
7. If step 6 has been performed target times, take top n walks and terminate.
8. Append to all edges all subedges, cloning walks as necessary.
9. Go to step 3.</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
1. Perhaps there's a specific way to interpret that result, but I don't see how it applies to my problem.<br>
<br>
2. Can you recommend a gentle introduction? I don't really know that much about optimization.<br>
<br>
I don't actually need to find <i>the</i> optimal solution. Specially not if every edge needs to be checked, which it obviously does. In such a large problem space there's bound to be a large number of "good enough" solutions.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn887801"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887955"><span title="887955,17960,1023,867,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887955" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm27a1284b96" title="Fri, 11 Dec 2015 06:50:31 +0000"></span><script type="text/javascript">WhenId('CH_zTm27a1284b96');</script><noscript>Dec 11, 2015 at 6:50am UTC</noscript></div>
<div class="dwho"><a href="/user/tition/"><b>tition</b> (867)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887955">
@helios: nope, I know of no gentle introduction to linear optimization. <br>
<br>
Linear optimization tells you how to compute with sets determined by systems of linear &gt;= inequalities (those are simply n-dimensional polyhedra, with infinite walls, edges, ... allowed). In particular, it tells you how to compute whether a set of linear inequalities 1) has a solution and 2) how to find the max/min of a linear function over such a set.<br>
<br>
Unless you need to use this in practice, the above summary is all you need to know. It is also good to know that many problems related to flows in graphs can  transformed to problems about minimizing/maximizing a linear function over a set given by linear inequalities. <br>
<br>
It seems you have your solution for now (until your problem specs change hehe ...), so those algorithms are just in case you are interested - and of course, you never know when some application of those may pop up randomly ... 
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm1c0975e24f" title="Fri, 11 Dec 2015 06:52:13 +0000"></span><script type="text/javascript">WhenId('CH_zTm1c0975e24f');</script><noscript>Dec 11, 2015 at 6:52am UTC</noscript></span>
<span class="dbtn" id="CH_btn887955"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg887963"><span title="887963,13171,1023,12617,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg887963" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmdc3084e52e" title="Fri, 11 Dec 2015 07:28:24 +0000"></span><script type="text/javascript">WhenId('CH_zTmdc3084e52e');</script><noscript>Dec 11, 2015 at 7:28am UTC</noscript></div>
<div class="dwho"><a href="/user/helios/"><b>helios</b> (12617)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i887963">
Okay, I have a working solution. The algorithm is pretty much the same as above, only that the vector of edges is hard-limited to 100k elements instead of pruning a percentage, or the memory usage went out of control. I also had to modify the DB queries to eliminate 99.43% of the dataset (all edges with a profit &lt;1000).<br>
<br>
What I'm working on is a tool similar to <a href="https://eddb.io/trade/hops">https://eddb.io/trade/hops</a> except, whereas that one can only search routes from a specific location and only attempts to maximize profit, mine searches all routes that start in a sphere and can also maximize efficiency (profit/cost), where cost is an approximation of the real time seconds a player will have to put in to complete the route. This prevents the situation where the player must visit a station that requires around 10 minutes of real time travel.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn887963"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(180864,1,13171,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript">
    google_ad_client = "ca-pub-1444228343479937";
    google_ad_slot = "9701143201";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<!-- leaderboard -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li class="selected"><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Flounge%2F180864%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>