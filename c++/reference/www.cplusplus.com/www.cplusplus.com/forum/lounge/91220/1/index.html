<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>why ++i is better than i++ (when applica - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/lounge/">Lounge</a></li>
<li class="here">why ++i is better than i++ (when applica</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> why ++i is better than i++ (when applicable)</h3><span id="CH_edttl"></span><div class="C_pages">Pages: <span title="Current page">1</span><a href="/forum/lounge/91220/2/">2</a><a href="/forum/lounge/91220/3/">3</a></div><span class="rootdatPost" title="91220,root,0,-1,43,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg490333"><span title="490333,68265,1023,1170,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490333" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm305c9c7078" title="Wed, 30 Jan 2013 03:32:20 +0000"></span><script type="text/javascript">WhenId('CH_zTm305c9c7078');</script><noscript>Jan 30, 2013 at 3:32am UTC</noscript></div>
<div class="dwho"><a href="/user/htirwin/"><b>htirwin</b> (1170)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490333">
I have lots of time to think when I drive back and forth to and from school.  Today I examined my preference for i++ over ++i when they accomplish the same thing. <br>
<br>
I've noticed that for some strange reason, I tend to both type, and think rhythmically.  When I program, I sometimes silently say to myself what I am write.  One of the main factors,, I presume, in my preference, is that ++i is easier to say.  It rolls off the tongue smoother. <br>
<br>
Secondly, I think that ++i is easier to type than i++.  Well, at least ++somevar.  When you are to make the decision to type a variable increment, you know before you start that you will be typing ++.  Before you have even fully realized the name of the specific variable, you can have already instinctually typed your ++.  I personally have a strange style of typing where I tend to rest my pinky on the shift key in between thoughts / sentences / statements.  Probably this comes from the fact that sentences start with capital letters.  This means that my pinky usually in a more suited position to begin to type ++ than it will be immediately after typing some identify.  <br>
<br>
There it is.  That is why only fools use i++ in preference of ++i;)  And those are the types of pointless thoughts the run through my brain while it sits idle.  
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490333"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490350"><span title="490350,61098,1023,4465,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490350" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm45270ce253" title="Wed, 30 Jan 2013 04:07:24 +0000"></span><script type="text/javascript">WhenId('CH_zTm45270ce253');</script><noscript>Jan 30, 2013 at 4:07am UTC</noscript></div>
<div class="dwho"><a href="/user/ResidentBiscuit/"><b>ResidentBiscuit</b> (4465)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490350">
Except they do different things and there are situations to use one as opposed to the other. 
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490350"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490369"><span title="490369,38650,1023,2142,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490369" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmc4721ad0f6" title="Wed, 30 Jan 2013 04:31:35 +0000"></span><script type="text/javascript">WhenId('CH_zTmc4721ad0f6');</script><noscript>Jan 30, 2013 at 4:31am UTC</noscript></div>
<div class="dwho"><a href="/user/naraku9333/"><b>naraku9333</b> (2142)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490369">
In many instances pre increment is faster/ more efficient, i.e. iterators.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490369"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490377"><span title="490377,68265,1023,1170,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490377" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmeed292c028" title="Wed, 30 Jan 2013 04:47:42 +0000"></span><script type="text/javascript">WhenId('CH_zTmeed292c028');</script><noscript>Jan 30, 2013 at 4:47am UTC</noscript></div>
<div class="dwho"><a href="/user/htirwin/"><b>htirwin</b> (1170)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490377">
<table class="quote"><tr><td class="qd">Except they do different things and there are situations to use one as opposed to the other.</td></tr></table><br>
Right, but when they accomplish the same thing...
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490377"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490378"><span title="490378,68265,1023,1170,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490378" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm910d5e8cda" title="Wed, 30 Jan 2013 04:48:13 +0000"></span><script type="text/javascript">WhenId('CH_zTm910d5e8cda');</script><noscript>Jan 30, 2013 at 4:48am UTC</noscript></div>
<div class="dwho"><a href="/user/htirwin/"><b>htirwin</b> (1170)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490378">
<table class="quote"><tr><td class="qd">In many instances pre increment is faster/ more efficient, i.e. iterators.</td></tr></table><br>
But optimization's should take care of that.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490378"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490383"><span title="490383,38650,1023,2142,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490383" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm72ae1f7364" title="Wed, 30 Jan 2013 05:05:49 +0000"></span><script type="text/javascript">WhenId('CH_zTm72ae1f7364');</script><noscript>Jan 30, 2013 at 5:05am UTC</noscript></div>
<div class="dwho"><a href="/user/naraku9333/"><b>naraku9333</b> (2142)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490383">
<table class="quote"><tr><td class="qd">But optimization's should take care of that.</td></tr></table> Maybe for container implementations where iterators are pointers, but that can't be guaranteed and most (AFAIK) are implemented as class objects.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490383"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490385"><span title="490385,18360,1023,13765,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490385" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm1e33359f12" title="Wed, 30 Jan 2013 05:09:17 +0000"></span><script type="text/javascript">WhenId('CH_zTm1e33359f12');</script><noscript>Jan 30, 2013 at 5:09am UTC</noscript></div>
<div class="dwho"><a href="/user/Disch/"><b>Disch</b> (13765)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490385">
My preference for ++i is simple:<br>
<br>
There are some situations where ++i might be a better performer.<br>
<br>
There are no situations where i++ will ever be a better performer (unless the operators are overloaded incorrectly or the code is bugged)<br>
<br>
<br>
Therefore since there's a possible benefit to the prefix form, and no possible benefit to the postfix form, I always prefer the prefix form unless I have specific need of the postfix form.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm691269ef7c" title="Wed, 30 Jan 2013 05:09:34 +0000"></span><script type="text/javascript">WhenId('CH_zTm691269ef7c');</script><noscript>Jan 30, 2013 at 5:09am UTC</noscript></span>
<span class="dbtn" id="CH_btn490385"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490386"><span title="490386,38650,1023,2142,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490386" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm571b1863ea" title="Wed, 30 Jan 2013 05:10:42 +0000"></span><script type="text/javascript">WhenId('CH_zTm571b1863ea');</script><noscript>Jan 30, 2013 at 5:10am UTC</noscript></div>
<div class="dwho"><a href="/user/naraku9333/"><b>naraku9333</b> (2142)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490386">
<span class="auto"><code class="source">++Disch;</code></span>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490386"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490408"><span title="490408,9863,1023,6190,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490408" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm198ca879da" title="Wed, 30 Jan 2013 06:01:16 +0000"></span><script type="text/javascript">WhenId('CH_zTm198ca879da');</script><noscript>Jan 30, 2013 at 6:01am UTC</noscript></div>
<div class="dwho"><a href="/user/firedraco/"><b>firedraco</b> (6190)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490408">
<span class="auto"><code class="source">++Disch;</code></span>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490408"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490435"><span title="490435,65107,1023,2796,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490435" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm6ad2f305ea" title="Wed, 30 Jan 2013 07:08:34 +0000"></span><script type="text/javascript">WhenId('CH_zTm6ad2f305ea');</script><noscript>Jan 30, 2013 at 7:08am UTC</noscript></div>
<div class="dwho"><a href="/user/Stewbond/"><b>Stewbond</b> (2796)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490435">
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></code></pre></td>
<td class="source"><pre><code><var>class</var> SomeNum
{
    <var>int</var> i;
<var>public</var>:
    SomeNum <var>operator</var>++() <cite>// prefix</cite>
    {
        i = i + 1;
        <var>return</var> *<var>this</var>;
    }

    SomeNum <var>operator</var>++(<var>int</var>) <cite>// postfix</cite>
    {
        SomeNum copy(*<var>this</var>);
        i = i + 1;
        <var>return</var> copy;
    }
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
The post-fix operator often makes a copy of the current object.  It's simply an extra step which may be expensive if you have a big class.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmaa5d6e40f2" title="Wed, 30 Jan 2013 07:13:16 +0000"></span><script type="text/javascript">WhenId('CH_zTmaa5d6e40f2');</script><noscript>Jan 30, 2013 at 7:13am UTC</noscript></span>
<span class="dbtn" id="CH_btn490435"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490501"><span title="490501,45401,1023,1010,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490501" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm651f1c2af4" title="Wed, 30 Jan 2013 12:21:53 +0000"></span><script type="text/javascript">WhenId('CH_zTm651f1c2af4');</script><noscript>Jan 30, 2013 at 12:21pm UTC</noscript></div>
<div class="dwho"><a href="/user/rapidcoder/"><b>rapidcoder</b> (1010)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490501">
<table class="quote"><tr><td class="qd"><br>
There are no situations where i++ will ever be a better performer (unless the operators are overloaded incorrectly or the code is bugged)</td></tr></table><br>
<br>
Oh, really? <br>
<br>
If you don't need the result, a sufficiently intelligent compiler should optimize both to the same machine code. <br>
<br>
But if you need the result, i++ is sometimes faster than ++i for primitive types, and I don't know of any compiler that would be able to change the code from ++i to i++ *if you need the result*.<br>
<br>
a = b++;   // can be processed in 1 CPU cycle, inc and mov executed on different pipelines<br>
a = ++b;  // forces RAW and possible pipeline stall<br>
<br>
I know they are both doing slightly different thing, but if you can decide, you should always use post-increment where possible (applies to primitive types only).
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmb74e83b05a" title="Wed, 30 Jan 2013 12:26:05 +0000"></span><script type="text/javascript">WhenId('CH_zTmb74e83b05a');</script><noscript>Jan 30, 2013 at 12:26pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490501"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490506"><span title="490506,63891,1023,2618,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490506" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmb5380dc65f" title="Wed, 30 Jan 2013 12:37:53 +0000"></span><script type="text/javascript">WhenId('CH_zTmb5380dc65f');</script><noscript>Jan 30, 2013 at 12:37pm UTC</noscript></div>
<div class="dwho"><a href="/user/S_G_H/"><b>S G H</b> (2618)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490506">
Talking about built-in types, following rapidcoder's example:<br>
<br>
Say 'a' is 'eax' and 'b' is 'ebx'.<br>
<br>
<span class="auto"><code class="source">a = b++;</code></span> resolves to:<br>
<div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>mov eax, ebx
inc ebx</samp></pre></td></tr></table></div><br>
<br>
Where<br>
<span class="auto"><code class="source">a = ++b;</code></span> resolves to:<br>
<div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>inc ebx
mov eax, ebx</samp></pre></td></tr></table></div><br>
<br>
So the operations are the same, but with a different order.<br>
Remember: this ONLY for built-ins.<br>
<br>
If you don't need the old return value, you should use <span class="auto"><code class="source">++b</code></span> anyways. I don't have a single reason why you wouldn't use it in such a situation, except with classes.<br>
<br>
Also:<br>
<table class="quote"><tr><th class="qh"><strong>rapidcoder</strong> wrote:</th></tr><tr><td class="qd">forces RAW and possible pipeline stall</td></tr></table><br>
What did you mean?<br>
<br>
EDIT: Ah, I understand what you mean now, but you may want to explain this for newbie users.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm6be66bf027" title="Wed, 30 Jan 2013 12:38:37 +0000"></span><script type="text/javascript">WhenId('CH_zTm6be66bf027');</script><noscript>Jan 30, 2013 at 12:38pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490506"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490543"><span title="490543,79150,3,6539,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490543" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmf5fc8b6f68" title="Wed, 30 Jan 2013 13:55:58 +0000"></span><script type="text/javascript">WhenId('CH_zTmf5fc8b6f68');</script><noscript>Jan 30, 2013 at 1:55pm UTC</noscript></div>
<div class="dwho"><a href="/user/vlad_from_moscow/"><b>vlad from moscow</b> (6539)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490543">
Whether to use ++i or i++ depends on the context.<br>
 <br>
For example for fundamental types there is no any difference between<br>
<br>
for ( T i = 0; i &lt; 10; i++ ) { /* ... */ }<br>
and<br>
for ( T i = 0; i &lt; 10; ++i ) { /* ... */ }<br>
<br>
where T is some integer type.<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490543"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490564"><span title="490564,78419,1023,7174,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490564" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm4005825047" title="Wed, 30 Jan 2013 14:36:37 +0000"></span><script type="text/javascript">WhenId('CH_zTm4005825047');</script><noscript>Jan 30, 2013 at 2:36pm UTC</noscript></div>
<div class="dwho"><a href="/user/cire/"><b>cire</b> (7174)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490564">
<table class="quote"><tr><td class="qd">a = b++; // can be processed in 1 CPU cycle, inc and mov executed on different pipelines<br>
a = ++b; // forces RAW and possible pipeline stall<br>
<br>
I know they are both doing slightly different thing, but if you can decide, you should always use post-increment where possible (applies to primitive types only). </td></tr></table><br>
<br>
They aren't doing <i>slightly</i> different things.  They are doing <i>different things</i>.<br>
<br>
Obviously where context matters, you use the one that is appropriate.  Where context doesn't matter, it's perfectly efficient to use either in the case of native types and more efficient in many cases to use the prefix version with user-defined types.  So, it's reasonable to prefer ++i when context doesn't matter, because the compiler will generate the same code for native types and the most efficient code for user-defined types.<br>
<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490564"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490567"><span title="490567,18360,1023,13765,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490567" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmb69b1f1332" title="Wed, 30 Jan 2013 14:43:10 +0000"></span><script type="text/javascript">WhenId('CH_zTmb69b1f1332');</script><noscript>Jan 30, 2013 at 2:43pm UTC</noscript></div>
<div class="dwho"><a href="/user/Disch/"><b>Disch</b> (13765)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490567">
@ rapidcoder:  That's a valid point.  My understanding of low level pipelinine behavior is admittedly less than I'd like.... but AFAIK it's impossible to accomplish <span class="auto"><code class="source">a = ++b</code></span> without the possible pipeline stall no matter what you do.  For example:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code>b++;
a = b;</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
This code will have the same effect (by using the postfix version), and the same read/write, and therefore the same potential pipeline stall.<br>
<br>
So it's not that prefix is any slower than postfix.  It's just that modifying a variable right before reading it is slower.<br>
<br>
So I'm standing by my original statement.<br>
<br>
Though I welcome further discussion on the topic.  Especially if my understanding is incorrect.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmfac938b192" title="Wed, 30 Jan 2013 14:44:15 +0000"></span><script type="text/javascript">WhenId('CH_zTmfac938b192');</script><noscript>Jan 30, 2013 at 2:44pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490567"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490571"><span title="490571,38387,1023,13301,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490571" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm8fe6e7f72f" title="Wed, 30 Jan 2013 14:48:02 +0000"></span><script type="text/javascript">WhenId('CH_zTm8fe6e7f72f');</script><noscript>Jan 30, 2013 at 2:48pm UTC</noscript></div>
<div class="dwho"><a href="/user/LB/"><b>LB</b> (13301)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490571">
Just like with many other things that are 'good habit', I use pre-increment and pre-decrement because it is a 'good habit', as explained in Disch's original post. There are times when I use post-increment or post-decrement, like <span class="auto"><code class="source">mymap.erase(it++);</code></span> because I use the return value of the previous state.<br>
<br>
I do have to wonder, in C++11, is there some way to optimize overloaded post-increment/decrement operators? it seems like the making a copy and changing the state is a prime candidate for move constructing but I don't see how it could be easily done without some memory magic.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm7fad20f4d2" title="Wed, 30 Jan 2013 14:49:12 +0000"></span><script type="text/javascript">WhenId('CH_zTm7fad20f4d2');</script><noscript>Jan 30, 2013 at 2:49pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490571"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490574"><span title="490574,18360,1023,13765,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490574" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm705b351454" title="Wed, 30 Jan 2013 14:50:31 +0000"></span><script type="text/javascript">WhenId('CH_zTm705b351454');</script><noscript>Jan 30, 2013 at 2:50pm UTC</noscript></div>
<div class="dwho"><a href="/user/Disch/"><b>Disch</b> (13765)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490574">
@LB:<br>
<br>
<span class="auto"><code class="source">mymap.erase(it++);</code></span><br>
<br>
You should never ever do that.  It's very bad.  Iterators become invalid once you erase them, and incrementing an invalid iterator is undefined.<br>
<br>
This is why erase returns an iterator:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code>it = mymap.erase(it);</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490574"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490579"><span title="490579,38387,1023,13301,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490579" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmf92105c86e" title="Wed, 30 Jan 2013 14:57:33 +0000"></span><script type="text/javascript">WhenId('CH_zTmf92105c86e');</script><noscript>Jan 30, 2013 at 2:57pm UTC</noscript></div>
<div class="dwho"><a href="/user/LB/"><b>LB</b> (13301)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490579">
Huh? I'm erasing the old iterator from before it got incremented...is the fact that it works for me implementation defined? Or does it have to do with all existing iterators becoming invalid?
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmb2b59fd7b8" title="Wed, 30 Jan 2013 14:58:10 +0000"></span><script type="text/javascript">WhenId('CH_zTmb2b59fd7b8');</script><noscript>Jan 30, 2013 at 2:58pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490579"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490582"><span title="490582,78419,1023,7174,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490582" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm07e0f011b9" title="Wed, 30 Jan 2013 14:59:58 +0000"></span><script type="text/javascript">WhenId('CH_zTm07e0f011b9');</script><noscript>Jan 30, 2013 at 2:59pm UTC</noscript></div>
<div class="dwho"><a href="/user/cire/"><b>cire</b> (7174)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490582">
<table class="quote"><tr><th class="qh"><strong>Disch</strong> wrote:</th></tr><tr><td class="qd"><span class="auto"><code class="source">mymap.erase(it++);</code></span><br>
<br>
You should never ever do that. It's very bad. Iterators become invalid once you erase them, and incrementing an invalid iterator is undefined.</td></tr></table><br>
<br>
That is actually perfectly valid for containers that don't invalidate iterators to other elements in the container when erase is used.  <tt>it</tt> is advanced before the map element is erased.  erase works on a (temporary) copy.<br>
<br>
It's good not to be in the habit of doing that though, because it's obviously not safe on all containers.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn490582"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg490585"><span title="490585,38387,1023,13301,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg490585" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm2b7b3b0dd2" title="Wed, 30 Jan 2013 15:08:36 +0000"></span><script type="text/javascript">WhenId('CH_zTm2b7b3b0dd2');</script><noscript>Jan 30, 2013 at 3:08pm UTC</noscript></div>
<div class="dwho"><a href="/user/LB/"><b>LB</b> (13301)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i490585">
Ah, yeah. I thought std::map didn't invalidate other iterators besides the one being erased. I'll get out of that habit now.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm91acaf4d80" title="Wed, 30 Jan 2013 15:08:51 +0000"></span><script type="text/javascript">WhenId('CH_zTm91acaf4d80');</script><noscript>Jan 30, 2013 at 3:08pm UTC</noscript></span>
<span class="dbtn" id="CH_btn490585"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div id="CH_insNew"></div><div id="CH_subscription"></div><div class="rootedtNew"></div><div class="C_pages right">Pages: <span title="Current page">1</span><a href="/forum/lounge/91220/2/">2</a><a href="/forum/lounge/91220/3/">3</a></div><script type="text/javascript">new for_PostList(91220,1,68265,0,'CH_PostList','CH_subscription',false,'CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript">
    google_ad_client = "ca-pub-1444228343479937";
    google_ad_slot = "9701143201";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<!-- leaderboard -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li class="selected"><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Flounge%2F91220%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>