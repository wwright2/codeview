<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Is my random number generator failing? - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/beginner/">Beginners</a></li>
<li class="here">Is my random number generator failing?</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Is my random number generator failing?</h3><span id="CH_edttl"></span><span class="rootdatPost" title="185422,root,0,-1,4,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg905316"><span title="905316,173323,1023,152,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg905316" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmd3ab659631" title="Thu, 25 Feb 2016 19:55:35 +0000"></span><script type="text/javascript">WhenId('CH_zTmd3ab659631');</script><noscript>Feb 25, 2016 at 7:55pm UTC</noscript></div>
<div class="dwho"><a href="/user/keanedawg/"><b>keanedawg</b> (152)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i905316">
So I'm using the classical srand() and rand() functions to generate random numbers to perform a stress test. But when I look at my output, I feel as though the numbers really aren't so random.<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;vector&gt;</dfn>
<dfn>#include &lt;time.h&gt; </dfn><cite>// debugging</cite>

<var>using</var> std::vector;
<var>using</var> std::cin;
<var>using</var> std::cout;

<var>int</var> MaxPairwiseProduct(<var>const</var> vector&lt;<var>int</var>&gt;&amp; numbers) {
	<var>int</var> result = 0;
	<var>int</var> n = numbers.size();
	<var>for</var> (<var>int</var> i = 0; i &lt; n; ++i) {
		<var>for</var> (<var>int</var> j = i + 1; j &lt; n; ++j) {
			<var>if</var> (numbers[i] * numbers[j] &gt; result) {
				result = numbers[i] * numbers[j];
			}
		}
	}
	<var>return</var> result;
}

<var>int</var> main() {
	srand(time(NULL)); <cite>// debugging</cite>
	<var>while</var> (<var>true</var>) { <cite>// debugging</cite>
	    


		<var>int</var> n;
		<cite>//cin &gt;&gt; n;</cite>
		n = rand() % 200000 + 2; <cite>// debugging</cite>
		vector&lt;<var>int</var>&gt; numbers(n);
		<var>for</var> (<var>int</var> i = 0; i &lt; n; ++i) {
			<cite>//cin &gt;&gt; numbers[i];</cite>
			numbers[i] = rand() % 100000;
		}

		<var>int</var> result = MaxPairwiseProduct(numbers);
		cout &lt;&lt; result &lt;&lt; <kbd>"\n"</kbd>;
	} <cite>// debugging</cite>

	<var>char</var> wait;
	cin &gt;&gt; wait;
	<var>return</var> 0;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
So, here's what's happening, I'm using a lousy algorithm to calculate the maximum product (AKA the greatest product between 2 numbers) in a vector of size N. So if I have a vector of 2, 5, 13, and 8. The max product would be 13 * 8 since those multiply to create the highest possible value.<br>
<br>
So, my sizes can get pretty large (I mean, I consider 200000 to be pretty large). And you definitely notice the difference in different sizes. So some calculations take a few minutes and others take a few seconds. That indicates that there is some randomness in the sizes. HOWEVER, look at the results of all my different products.<br>
<br>
It would probably be best if I pipe but I'm on visual studio and I'm lazy<br>
<div class="auto"><table class="snippet"><tr><td class="output"><pre><samp>1073446930
1073577990
1072922670
1073610755
</samp></pre></td></tr></table></div><br>
And as you can see, all these max Multiplying values are very very similar. In fact, they are so similar I suspect it's not really random. Or maybe not. Maybe this is a normal distribution with large groups of numbers? I suspect my random numbers are not so random.<br>
<br>
So sorry for the long explanations. Essentially I'm asking why my output doesn't seem very random. All the numbers are quite similar in value.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm961f0a276f" title="Thu, 25 Feb 2016 21:08:22 +0000"></span><script type="text/javascript">WhenId('CH_zTm961f0a276f');</script><noscript>Feb 25, 2016 at 9:08pm UTC</noscript></span>
<span class="dbtn" id="CH_btn905316"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg905345"><span title="905345,11103,1023,4532,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg905345" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmffd6b97560" title="Thu, 25 Feb 2016 21:39:41 +0000"></span><script type="text/javascript">WhenId('CH_zTmffd6b97560');</script><noscript>Feb 25, 2016 at 9:39pm UTC</noscript></div>
<div class="dwho"><a href="/user/Zhuge/"><b>Zhuge</b> (4532)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i905345">
Have you tried outputting at least the two numbers you are multiplying? Or perhaps just the results of each call? That should make it very clear if you are not getting random-looking data generated.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn905345"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg905349"><span title="905349,173323,1023,152,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg905349" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTmceefec2b79" title="Thu, 25 Feb 2016 22:14:07 +0000"></span><script type="text/javascript">WhenId('CH_zTmceefec2b79');</script><noscript>Feb 25, 2016 at 10:14pm UTC</noscript></div>
<div class="dwho"><a href="/user/keanedawg/"><b>keanedawg</b> (152)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i905349">
Good idea. I'll try that.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn905349"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg905361"><span title="905361,78419,1023,7174,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg905361" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm95c9243c34" title="Thu, 25 Feb 2016 23:43:07 +0000"></span><script type="text/javascript">WhenId('CH_zTm95c9243c34');</script><noscript>Feb 25, 2016 at 11:43pm UTC</noscript></div>
<div class="dwho"><a href="/user/cire/"><b>cire</b> (7174)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i905361">
<span class="auto"><code class="source">std::cout &lt;&lt; <kbd>"Max value returned by rand: "</kbd> &lt;&lt; RAND_MAX &lt;&lt; <kbd>'\n'</kbd> ;</code></span><br>
<br>
On VC++, for instance, this value is the minimum required by the standard which is pretty close to the square root of the values you're getting.<br>
<br>
Btw, better algorithm:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;algorithm&gt;</dfn>
<dfn>#include &lt;vector&gt;</dfn>
<dfn>#include &lt;time.h&gt; </dfn><cite>// debugging</cite>

<var>using</var> std::vector;
<var>using</var> std::cin;
<var>using</var> std::cout;

<var>int</var> main() {
    srand(time(NULL)); <cite>// debugging</cite>

    vector&lt;<var>int</var>&gt; numbers;
    numbers.reserve(200000 + 2);

    <var>for</var> (<var>auto</var> i = 0u; i &lt; 10; ++i )
    {
        <var>int</var> n;
        <cite>//cin &gt;&gt; n;</cite>
        n = rand() % 200000 + 2; <cite>// debugging</cite>
        numbers.resize(n);
        <var>for</var> (<var>auto</var>&amp; num : numbers) num = rand() % 100000;
        sort(numbers.begin(), numbers.end());
        
        <var>auto</var> sz = numbers.size();
        std::cout &lt;&lt; numbers[sz - 1] &lt;&lt; <kbd>" * "</kbd> &lt;&lt; numbers[sz - 2] &lt;&lt; <kbd>" = "</kbd> &lt;&lt; numbers[sz - 1] * numbers[sz - 2] &lt;&lt; <kbd>'\n'</kbd>;
    } <cite>// debugging</cite>
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm2be836bc4f" title="Thu, 25 Feb 2016 23:53:02 +0000"></span><script type="text/javascript">WhenId('CH_zTm2be836bc4f');</script><noscript>Feb 25, 2016 at 11:53pm UTC</noscript></span>
<span class="dbtn" id="CH_btn905361"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="/user/">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(185422,0,173323,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li class="selected"><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Fbeginner%2F185422%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>