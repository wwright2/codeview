<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>pointers, arrays and simpletron  - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/beginner/">Beginners</a></li>
<li class="here">pointers, arrays and simpletron </li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> pointers, arrays and simpletron </h3><span id="CH_edttl"></span><span class="rootdatPost" title="185417,root,0,-1,1,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg905298"><span title="905298,197574,1023,41,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg905298" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTme57f84f80b" title="Thu, 25 Feb 2016 18:49:14 +0000"></span><script type="text/javascript">WhenId('CH_zTme57f84f80b');</script><noscript>Feb 25, 2016 at 6:49pm UTC</noscript></div>
<div class="dwho"><a href="/user/jamesfarrow/"><b>jamesfarrow</b> (41)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i905298">
Hi I am having trouble getting my simpletron to add two numbers and output the result. it is meant to be an exercise in pointers and arrays. I can't see where I'm going wrong at the moment. If any expert can 'point' me in the right direction I would really appreciate it!!<br>
<br>
Thanks<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br></code></pre></td>
<td class="source"><pre><code>  <cite>//</cite>
<cite>//  main.cpp</cite>
<cite>//  simpletron exercise8.18</cite>
<cite>//</cite>
<cite>//  Created by James Farrow on 17/02/2016.</cite>
<cite>//  Copyright © 2016 James Farrow. All rights reserved.</cite>
<cite>////</cite>
<cite>//8.18 (Machine-Language Programming) Let’s create a computer we’ll call the Simpletron. As its name implies, it’s a simple machine, but, as we’ll soon see, it’s a powerful one as well. The Sim- pletron runs programs written in the only language it directly understands, that is, Simpletron Ma- chine Language, or SML for short.</cite>
<cite>//The Simpletron contains an accumulator—a “special register” in which information is put before the Simpletron uses that information in calculations or examines it in various ways. All information in the Simpletron is handled in terms of words. A word is a signed four-digit decimal number, such as +3364, -1293, +0007, -0001, etc. The Simpletron is equipped with a 100-word memory, and these words are referenced by their location numbers 00, 01, ..., 99.</cite>
<cite>//Before running an SML program, we must load, or place, the program into memory. The first instruction (or statement) of every SML program is always placed in location 00. The simulator will start executing at this location.</cite>
<cite>//Each instruction written in SML occupies one word of the Simpletron’s memory; thus, instructions are signed four-digit decimal numbers. Assume that the sign of an SML instruction is always plus, but the sign of a data word may be either plus or minus. Each location in the Simpletron’s memory may contain an instruction, a data value used by a program or an unused (and hence undefined) area of memory. The first two digits of each SML instruction are the operation code that specifies the operation to be performed. SML operation codes are shown in Fig. 8.23.</cite>
<cite>//The last two digits of an SML instruction are the operand—the address of the memory loca- tion containing the word to which the operation applies.</cite>

<cite>//Input/output operations</cite>
<cite>//const int READ = 10; Readawordfromthekeyboardintoaspecificlocationin memory.</cite>
<cite>//const int WRITE = 11; Writeawordfromaspecificlocationinmemorytothe screen.</cite>

<cite>//Load and store operations</cite>
<cite>//const int LOAD = 20; Loadawordfromaspecificlocationinmemoryintothe accumulator.</cite>
<cite>//const int STORE = 21; Storeawordfromtheaccumulatorintoaspecificloca- tion in memory.</cite>

<cite>//Arithmetic operations</cite>
<cite>//const int ADD = 30; Addawordfromaspecificlocationinmemorytothe word in the accumulator (leave result in accumulator).</cite>
<cite>//const int SUBTRACT = 31; Subtractawordfromaspecificlocationinmemoryfrom the word in the accumulator (leave result in accumula-tor).</cite>
<cite>//const int DIVIDE = 32; Divideawordfromaspecificlocationinmemoryinto the word in the accumulator (leave result in accumula-tor).</cite>
<cite>//const int MULTIPLY = 33; Multiplyawordfromaspecificlocationinmemoryby the word in the accumulator (leave result in accumula-tor).</cite>

<cite>//Transfer-of-control operations</cite>
<cite>//const int BRANCH = 40; Branchtoaspecificlocationinmemory.</cite>
<cite>//const int BRANCHNEG = 41; Branchtoaspecificlocationinmemoryiftheaccumula- tor is negative.</cite>
<cite>//const int BRANCHZERO = 42; Branchtoaspecificlocationinmemoryiftheaccumula- tor is zero.</cite>
<cite>//const int HALT = 43; Halt—theprogramhascompleteditstask.</cite>

<cite>//Now let’s consider two simple SML programs. The first (Fig. 8.24) reads two numbers from the keyboard and computes and prints their sum. The instruction +1007 reads the first number from the keyboard and places it into location 07 (which has been initialized to zero). Instruction +1008 reads the next number into location 08. The load instruction, +2007, places (copies) the first number into the accumulator, and the add instruction, +3008, adds the second number to the number in the accumulator. All SML arithmetic instructions leave their results in the accumulator. The store instruction, +2109, places (copies) the result back into memory location 09. Then the write instruction, +1109, takes the number and prints it (as a signed four-digit decimal number). The halt instruction, +4300, terminates execution.</cite>


<cite>//program as below</cite>
<cite>//00 +1007 (Read A)</cite>
<cite>//01 +1008 (Read B)</cite>
<cite>//02 +2007 (Load A)</cite>
<cite>//03 +3008 (Add B)</cite>
<cite>//04 +2109 (Store C)</cite>
<cite>//05 +1109 (Write C)</cite>
<cite>//06 +4300 (Halt)</cite>
<cite>//07 +0000 (Variable A)</cite>
<cite>//08 +0000 (Variable B)</cite>
<cite>//09 +0000 (Result C)</cite>

<dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;string&gt;</dfn>
<dfn>#include &lt;iomanip&gt;</dfn>

<var>void</var> inputCommands(<var>int</var> *);
<var>void</var> copyAccumulatorToMemory(<var>int</var> *, <var>int</var> *);
<var>void</var> processCommandsAndExecute(<var>int</var> *, <var>int</var> *);
<var>void</var> printAccumulator(<var>int</var> *);

<var>int</var> main()
{
    <var>const</var> <var>int</var> arraySize = 50;<cite>//arraysize for accumulator &amp; memory</cite>
    
    <var>int</var> accumulator[arraySize] = {0};
    <var>int</var> memory[arraySize] = {10};
    
    <var>int</var> *accumulatorPtr;
    accumulatorPtr = accumulator;
    
    <var>int</var> *memoryPtr;
    memoryPtr = memory;
    
    inputCommands(memoryPtr);
    copyAccumulatorToMemory(memory, accumulator);
    processCommandsAndExecute(accumulator, memory);
    printAccumulator(accumulatorPtr);
    std::cout &lt;&lt; std::endl;
    
    <var>return</var> 0;
    
}


<cite>//input commands to register memory</cite>
<var>void</var> inputCommands(<var>int</var> *memoryPtr)
{
    <var>int</var> inputFromKeyboard = 0;
    <var>int</var> counter = 0;
    
    <var>while</var> (inputFromKeyboard != 4300) {
        std::cout &lt;&lt; <kbd>"Please inpt your SML commands HALT:4300 to end input: "</kbd>;
        std::cin &gt;&gt; inputFromKeyboard;
        *(memoryPtr + counter) = inputFromKeyboard;
        counter++;
    }
}


<cite>//copy contents of memory to accumulator for simpletron to process</cite>
<var>void</var> copyAccumulatorToMemory(<var>int</var> *memPtr, <var>int</var> *accumPtr)
{
    <var>int</var> counter = 0;
    
    <var>while</var> (*(memPtr + counter) != 0) {
        *(accumPtr + counter) = *(memPtr + counter);
        counter++;
    }
}

<var>void</var> printAccumulator(<var>int</var> *accumPtr)
{
    std::cout &lt;&lt; <kbd>"In print array"</kbd> &lt;&lt; std::endl;
    <var>int</var> arrayCounter = 0;
    <var>while</var> (arrayCounter &lt; 10) {
        std::cout &lt;&lt; *(accumPtr + arrayCounter) &lt;&lt; std::endl;
        arrayCounter++;
    }
}

<var>void</var> processCommandsAndExecute(<var>int</var> *accumulatorPtr, <var>int</var> *memoryPtr)
{
    <var>int</var> command = 0;
    <var>int</var> operand = 0;
    <var>int</var> pointerCounter = 0;
    
    <var>while</var> (pointerCounter != 4300){
        <var>int</var> integer = 0;
        command = memoryPtr[pointerCounter];
        <var>int</var> memLocation = command % 100;
        command /= 100;
        operand = command % 100;
        <var>switch</var> (operand) {
            <var>case</var> 10:
                std::cout &lt;&lt; <kbd>"Input an integer: "</kbd>;
                std::cin &gt;&gt; integer;
                <var>while</var> (!std::cin) {
                    std::cin.clear();
                    std::cin.ignore();
                    std::cout &lt;&lt; <kbd>"Input an number: "</kbd>;
                    std::cin &gt;&gt; integer;
                }
                memoryPtr[memLocation] = integer;
                pointerCounter++;
                <var>break</var>;
            <var>case</var> 11:
                std::cout &lt;&lt; <kbd>"Answer: "</kbd> &lt;&lt; *(accumulatorPtr + memLocation ) &lt;&lt; std::endl;
                pointerCounter = 4300;
                <var>break</var>;
            <var>case</var> 20:
                accumulatorPtr[memLocation] = memoryPtr[memLocation];
                pointerCounter++;
                <var>break</var>;
            <var>case</var> 21:
                accumulatorPtr[memLocation -2] = accumulatorPtr[memLocation];
                pointerCounter++;
                <var>break</var>;
            <var>case</var> 30:
                accumulatorPtr[memLocation -1] += memoryPtr[memLocation];
                pointerCounter++;
                <var>break</var>;
<cite>//            case 31:</cite>
<cite>//                accum[memLocation] = accum[memLocation] - mem[memLocation];</cite>
<cite>//                break;</cite>
            <var>default</var>:
                <var>break</var>;
            }
        }
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn905298"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="/user/">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(185417,0,197574,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript">
    google_ad_client = "ca-pub-1444228343479937";
    google_ad_slot = "9701143201";
    google_ad_width = 728;
    google_ad_height = 90;
</script>
<!-- leaderboard -->
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li class="selected"><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Fbeginner%2F185417%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>