<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Sorting two std::vectors&lt;t&gt; into one lis - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/forum/beginner/">Beginners</a></li>
<li class="here">Sorting two std::vectors&lt;t&gt; into one lis</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support">
<div id='div-gpt-ad-1427191279638-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1427191279638-0'); });
</script>
</div>
</div>
<div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Sorting two std::vectors&lt;t&gt; into one list</h3><span id="CH_edttl"></span><span class="rootdatPost" title="184730,root,0,-1,2,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg902844"><span title="902844,154113,1023,23,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg902844" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTme4fd0b1355" title="Tue, 16 Feb 2016 23:23:46 +0000"></span><script type="text/javascript">WhenId('CH_zTme4fd0b1355');</script><noscript>Feb 16, 2016 at 11:23pm UTC</noscript></div>
<div class="dwho"><a href="/user/Jack_Hammered/"><b>Jack Hammered</b> (23)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i902844">
I have problems sorting two std::vector&lt;t&gt; lists into one. Currently I can add monitors, but if one if disconnected it will still be stored in the list (It needs to be deleted as it could be storing large unused data in the memory).<br>
<br>
I send a struct through EnumDisplayMonitors<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code><var>struct</var> structMonitorList
{
	<var>int</var> iCount = 0;
	<var>int</var> iInactiveMonitors = 0;
	std::vector&lt;MONITORINFOEX&gt; infoArray;
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
This will push_back MONITORINFOEX structure for every active monitor. This is the 'new' list and I presume will not create a memory problem as it is automatically allocated / destroyed.<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br></code></pre></td>
<td class="source"><pre><code>	structMonitorList tempList;
	<cite>// Call EnumDisplayMonitors CALLBACK function</cite>
	EnumDisplayMonitors(NULL, NULL, cbInfoProcedure, <var>reinterpret_cast</var>&lt;LPARAM&gt;(&amp;tempList));

	<cite>// If the previous list was empty (Usually when the program first runs)</cite>
	<var>if</var> (iActiveMonitors == 0)
		<cite>// If empty then copy entire list</cite>
	{
		<var>for</var> (<var>int</var> i = 0; i &lt; iActiveMonitors; i++)
		{
			smiMonitorList.push_back(SingleMonitorInfo(tempList.infoArray[i]));
		}
	}
	<cite>// If not empty then compare lists</cite>

	<cite>// For all monitors in new list</cite>
	<var>for</var> (<var>int</var> i = 0; i &lt; tempList.iCount; i++)
	{
		<var>int</var> j = 0;
		<var>bool</var> found = <var>false</var>;
		<cite>// While all monitors in old list</cite>
		<var>while</var> (j &lt; iActiveMonitors &amp;&amp; !found)
		{
			<cite>// If monitors are identical</cite>
			<var>if</var> (compareMonitor(smiMonitorList[i], tempList.infoArray[j]))
			{
				<cite>// Replace RECT structures - As relative position might have changed, but Device, Monitor and Resolution are identical</cite>
				smiMonitorList[i].rcMonitorArea = tempList.infoArray[j].rcMonitor;
				smiMonitorList[i].rcWorkArea = tempList.infoArray[j].rcWork;
				<cite>// Found old monitor in new list</cite>
				found = TRUE;
			}
			<var>else</var>
			{
				<cite>// Increase old list position</cite>
				j++;
			}
		}

		<cite>// If new monitor not found append to old list</cite>
		<var>if</var> (!found)
		{
			smiMonitorList.push_back(SingleMonitorInfo(tempList.infoArray[i]));
		}

	}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
This is my sorting for the two lists. It doesn't remove missing monitors and to add another nested for / while loop to check seems wasteful. This check needs to be able to run a few times a second without affecting normal PC use. Any ideas?<br>
<br>
If it is any help, here is my comments for compareMonitor()<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br></code></pre></td>
<td class="source"><pre><code><cite>/*
	METHOD: compareMonitor
	- Compares monitors (Device name, resolution and monitor name)
	PARAMENTERS:
	RETURNS: int
	(&gt;0) method failed
	( 0 ) method succeeded, device name, resolution and monitor name are same
	( 1 ) method succeeded, device name are different
	( 2 ) method succeeded, device name are same, resolution are different
	( 3 ) method succeeded, device name and resolution are same, monitor name are different
*/</cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
EDIT: I just had to search for the correctly worded question on google. I need to use vector.insert.<br>
<br>
EDIT #1: This is harder than I thought. Not sure where to begin, or if I can sort the vectors easily or at all through my compareMonitor method.<br>
<br>
EDIT #2: I think the first if needs to be in a separate method run in the ctor. This would stop it having to check every time it updates the list. I have now done this.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmff4cf04edc" title="Wed, 17 Feb 2016 00:01:56 +0000"></span><script type="text/javascript">WhenId('CH_zTmff4cf04edc');</script><noscript>Feb 17, 2016 at 12:01am UTC</noscript></span>
<span class="dbtn" id="CH_btn902844"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg903041"><span title="903041,198580,1023,108,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg903041" title="Link to this post"><img src="/img/link.png" width="16" height="8"></a> <span id="CH_zTm947865730d" title="Wed, 17 Feb 2016 18:53:56 +0000"></span><script type="text/javascript">WhenId('CH_zTm947865730d');</script><noscript>Feb 17, 2016 at 6:53pm UTC</noscript></div>
<div class="dwho"><a href="/user/jgg2002/"><b>jgg2002</b> (108)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i903041">
What exactly does the problem statement say?
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn903041"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="/user/">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(184730,0,154113,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder articles"><a href="/articles/">Articles</a></li>
<li class="folder selected forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/forum/">Forum</a></b></h3>
<ul>
<li class="selected"><a href="/forum/beginner/"><b>Beginners</b></a></li><li><a href="/forum/windows/"><b>Windows Programming</b></a></li><li><a href="/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="/forum/general/"><b>General C++ Programming</b></a></li><li><a href="/forum/lounge/"><b>Lounge</b></a></li><li><a href="/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Fforum%2Fbeginner%2F184730%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>