<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Koch Fractal - One of the easiest algori - C++ Articles</title>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="/v321/main.css">
<script src="/v321/main.js" type="text/javascript"></script>
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/32882001/L', [728, 90], 'div-gpt-ad-1427191279638-0').addService(googletag.pubads());
googletag.enableServices();
});
</script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="/articles/">Articles</a></li>
<li class="here">Koch Fractal - One of the easiest algori</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div id="I_content">
<div class="C_art">
<div id="I_author">Published by <b><a href="/user/bilalCh213/" rel="author">bilalCh213</a></b></div>
<div id="I_date">Oct 1, 2015 (last update: Oct 13, 2015)</div>
<h1>Koch Fractal - One of the easiest algorithms with graphics</h1>
<div id="I_score">Score: 3.9/5 (67 votes)</div>
<div id="I_stars"><img src="/ico/16star.png" width="16" height="16" alt="*"><img src="/ico/16star.png" width="16" height="16" alt="*"><img src="/ico/16star.png" width="16" height="16" alt="*"><img src="/ico/16star-half.png" width="16" height="16" alt="*"><img src="/ico/16star-empty.png" width="16" height="16" alt="*"></div>
<div id="I_content">
<H3>What is Koch Fractal?</H3>
Koch Fractal is a simple algorithm which produces snowflake from a triangle. The concept behind this, is to break a line into two while leaving one third of the space between them where we fit two more lines forming an equilateral triangle without the base. This process is, then repeated to all lines again and again!<br>
<IMG SRC="kfrac.png" alt="">
<H3>The Implementation</H3>
First thing, you should know basics of C++ as well as a bit of SDL2 and basic trigonometry to understand it.<br>
We are going to use <STRONG>SDL2</STRONG> to have some graphics. We will only use some of its basic primitive drawing methods for drawing lines. So, we are going to include only SDL2 header. We are also going to include list.h to have a list of lines.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;list&gt;</dfn>
<dfn>#include &lt;SDL2/SDL.h&gt; </dfn><cite>// or #include &lt;SDL.h&gt; </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Now, we need an <EM>SDL_Window*</EM>, an <EM>SDL_Renderer*</EM> and an <EM>SDL_Event</EM> instance to have the image on screen and to handle events.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br></code></pre></td>
<td class="source"><pre><code>SDL_Window* window = NULL;
SDL_Renderer* renderer = NULL;

<var>bool</var> quit = <var>false</var>;
SDL_Event in;
<var>const</var> <var>int</var> SCR_W = 640; <cite>// Width of the window</cite>
<var>const</var> <var>int</var> SCR_H = 480; <cite>// Height of the window </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Previously, I said that there will be a list of lines. That means, we need to define line as a struct or a class. You can use struct as well but I am using class for that.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br></code></pre></td>
<td class="source"><pre><code><var>class</var> Line
{
<var>public</var>:

	<var>double</var> x, y, length, angle; <cite>// Members</cite>
	
	Line(<var>double</var> x, <var>double</var> y, <var>double</var> length, <var>double</var> angle) : x(x), y(y), length(length), angle(angle) {}
	
	<var>double</var> getX2() <cite>// Getting the second x coordinate based on the angle and length</cite>
	{
		<var>return</var> x+cos(angle*(M_PI/180.0))*length;
	}
	
	<var>double</var> getY2() <cite>// Getting the second y coordinate based on the angle and length</cite>
	{
		<var>return</var> y+sin(angle*(M_PI/180.0))*length;
	}
	
	<var>void</var> draw()
	{
		SDL_SetRenderDrawColor(renderer, 100,255,100,255); <cite>// Setting the color of the line</cite>
		SDL_RenderDrawLine(renderer,x,y, getX2(),getY2()); <cite>// Drawing the line</cite>
		SDL_SetRenderDrawColor(renderer, 0,0,0,255); <cite>// Resetting the color</cite>
	}
};</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Now, we need to have a list of lines.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code>std::list&lt;Line*&gt; lines; <cite>//Note that we do not take Line, we take Line* </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Finally, the Koch algorithm implementation, all in one function which takes list of Line* as a parameter.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br></code></pre></td>
<td class="source"><pre><code><cite>//Worth noting: It's a heavy function!</cite>
<var>void</var> kochFractal( std::list&lt;Line*&gt; &amp; lines )
{
	std::list&lt;Line*&gt; newLines; <cite>//For getting new Line*(s)</cite>
	std::list&lt;Line*&gt; delLines; <cite>//For getting Line*(s) to be deleted</cite>
	<var>for</var>(<var>auto</var> itr = lines.begin(); itr != lines.end(); itr++)
	{
		<var>double</var> x_l1 = (*itr)-&gt;x;
		<var>double</var> y_l1 = (*itr)-&gt;y;
		<var>double</var> len_l1 = (*itr)-&gt;length/3;
		<var>double</var> ang_l1 = (*itr)-&gt;angle;
	
		<var>double</var> x_l2 = (*itr)-&gt;x + (cos((*itr)-&gt;angle*(M_PI/180.0))*(*itr)-&gt;length/1.5);
		<var>double</var> y_l2 = (*itr)-&gt;y + (sin((*itr)-&gt;angle*(M_PI/180.0))*(*itr)-&gt;length/1.5);
		<var>double</var> len_l2 = (*itr)-&gt;length/3;
		<var>double</var> ang_l2 = (*itr)-&gt;angle;
		
		<var>double</var> x_l3 = (*itr)-&gt;x + (cos((*itr)-&gt;angle*(M_PI/180.0))*(*itr)-&gt;length/3.0);
		<var>double</var> y_l3 = (*itr)-&gt;y + (sin((*itr)-&gt;angle*(M_PI/180.0))*(*itr)-&gt;length/3.0);
		<var>double</var> len_l3 = (*itr)-&gt;length/3.0;
		<var>double</var> ang_l3 = (*itr)-&gt;angle - 300.0;

		<var>double</var> x_l4 = (*itr)-&gt;x + (cos((*itr)-&gt;angle*(M_PI/180.0))*((*itr)-&gt;length/1.5));
		<var>double</var> y_l4 = (*itr)-&gt;y + (sin((*itr)-&gt;angle*(M_PI/180.0))*((*itr)-&gt;length/1.5));
		<var>double</var> len_l4 = (*itr)-&gt;length/3.0;
		<var>double</var> ang_l4 = (*itr)-&gt;angle - 240.0;

		<cite>//All four lines properties are setted above!</cite>

		<cite>//Fixing bug - Changing Triangle Forming Orientation</cite>
		x_l4 = x_l4 + cos(ang_l4*(M_PI/180.0))*len_l4;
		y_l4 = y_l4 + sin(ang_l4*(M_PI/180.0))*len_l4;
		ang_l4 -= 180.0;

		<cite>//Each line forms four new lines...</cite>
		newLines.push_back( <var>new</var> Line( x_l1, y_l1, len_l1, ang_l1 ) );
		newLines.push_back( <var>new</var> Line( x_l2, y_l2, len_l2, ang_l2 ) );
		newLines.push_back( <var>new</var> Line( x_l3, y_l3, len_l3, ang_l3 ) );
		newLines.push_back( <var>new</var> Line( x_l4, y_l4, len_l4, ang_l4 ) );

		<cite>//...for deleting itself!</cite>
		delLines.push_back( (*itr) );
	}
	
	<var>for</var>(<var>auto</var> itr = newLines.begin(); itr != newLines.end(); itr++)
		lines.push_back( (*itr) ); <cite>//Adding new Line*(s)</cite>
		
	<var>for</var>(<var>auto</var> itr = delLines.begin(); itr != delLines.end(); itr++)
	{
		lines.remove( (*itr) ); <cite>//Deleting new Line*(s)</cite>
		<var>delete</var> (*itr);
	}
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Phew! A big implementation really! Now, time for the action in the <span class="auto"><code class="source"><var>int</var> main()</code></span>:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br></code></pre></td>
<td class="source"><pre><code><var>int</var> main( <var>int</var> argc, <var>char</var>** args )
{
	SDL_Init(SDL_INIT_EVERYTHING); <cite>//Initializing SDL2</cite>
	window = SDL_CreateWindow( <kbd>"Koch Fractal"</kbd>, SDL_WINDOWPOS_UNDEFINED,
SDL_WINDOWPOS_UNDEFINED, SCR_W, SCR_H, SDL_WINDOW_SHOWN ); <cite>//Creating window</cite>
	renderer = SDL_CreateRenderer( window, -1, SDL_RENDERER_ACCELERATED ); <cite>//Creating renderer</cite>
	
	SDL_SetRenderDrawColor(renderer,0,0,0,255); <cite>//Setting default screen color</cite>
	
	<cite>//Horizontal line</cite>
	<cite>//lines.push_back( new Line(SCR_W-10,SCR_H/2.0, SCR_W-20,180.0) );</cite>
	
	<cite>//Vertical line</cite>
	<cite>//lines.push_back( new Line(SCR_W/1.5,10, SCR_H-20,90.0) );</cite>
	
	<cite>//Equilateral Triangle for forming Koch Snowflake</cite>
	lines.push_back( <var>new</var> Line( SCR_W-100, 150, SCR_W-200, 180.0) );
	lines.push_back( <var>new</var> Line( 100, 150, SCR_W-200, 60.0) );
	Line* lineS = <var>new</var> Line( SCR_W-100, 150, SCR_W-200, 120.0);
	lineS-&gt;x += cos(lineS-&gt;angle *(M_PI/180.0))*lineS-&gt;length;
	lineS-&gt;y += sin(lineS-&gt;angle *(M_PI/180.0))*lineS-&gt;length;
	lineS-&gt;angle -= 180.0;
	lines.push_back( lineS );
	
	<var>while</var>(!quit) <cite>//The loop</cite>
	{
		
		<var>while</var>(SDL_PollEvent(&amp;in)) <cite>//Polling Events</cite>
		{
			<var>if</var>(in.type == SDL_QUIT)
				quit = <var>true</var>;
		}
		
		SDL_RenderClear(renderer); <cite>//Clearing renderer</cite>
		
		<var>for</var>(<var>auto</var> itr = lines.begin(); itr != lines.end(); itr++)
			(*itr)-&gt;draw(); <cite>//Drawing all lines</cite>
		
		SDL_RenderPresent(renderer); <cite>//Updating screen</cite>
		
		SDL_Delay(2500); <cite>//Delay to show each iteration</cite>
		kochFractal(lines); <cite>//Applying Koch Fractal</cite>
	}
	
	<var>for</var>(<var>auto</var> itr = lines.begin(); itr != lines.end(); itr++)
		<var>delete</var> (*itr); <cite>//Deleting all lines at the end of a program</cite>
	
	SDL_DestroyRenderer(renderer);
	SDL_DestroyWindow(window);
	SDL_Quit(); <cite>//Clearing all SDL resources</cite>
	
	<var>return</var> 0;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<H3>The Results!</H3>
Following images show the result. It was executed on a mobile device using C4Droid, a program for running C++ programs on Android.<br>
<br>
I hope that this excites you for more programming, algorithms and fractals. For more such things, visit my blog <STRONG><A HREF="http://bacprogramming.wordpress.com">bacprogramming.wordpress.com</A></STRONG>.<br>
<IMG SRC="Screenshot_2015-10-01-12-04-25.p" alt="">
<IMG SRC="Screenshot_2015-10-01-12-04-13.p" alt="">
<IMG SRC="Screenshot_2015-10-01-12-04-29.p" alt="">
</div></div><div id="CH_bb"></div><div id="CH_scoreapp"></div><script type="text/javascript">new Score('CH_scoreapp','/articles/score.cgi','iE86b7Xj');</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="/info/">Information</a></li>
<li class="folder doc"><a href="/doc/">Tutorials</a></li>
<li class="folder reference"><a href="/reference/">Reference</a></li>
<li class="folder selected articles"><a href="/articles/">Articles</a></li>
<li class="folder forum"><a href="/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="/articles/">Articles</a></b></h3>
<ul>
<li><a href="/articles/algorithms/">Algorithms</a></li><li><a href="/articles/cpp11/">C++ 11</a></li><li><a href="/articles/graphics/">Graphics and multimedia</a></li><li><a href="/articles/howto/">How-To</a></li><li><a href="/articles/language/">Language Features</a></li><li><a href="/articles/linux/">Unix/Linux programming</a></li><li><a href="/articles/sourcecode/">Source Code</a></li><li><a href="/articles/standard_library/">Standard Library</a></li><li><a href="/articles/tips/">Tips and Tricks</a></li><li><a href="/articles/tools/">Tools and Libraries</a></li><li><a href="/articles/visualcpp/">Visual C++</a></li><li><a href="/articles/winapi/">Windows API</a></li></ul>
</div>
<div id="I_subnav"></div>
</div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="/">Home page</a> | <a href="/privacy.do">Privacy policy</a><br>&copy; cplusplus.com, 2000-2016 - All rights reserved - <i>v3.1</i><br><a href="/contact.do?referrer=www.cplusplus.com%2Farticles%2FiE86b7Xj%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
onSession(function(us) {
		document.getElementById('I_subnav').innerHTML=
			us.ok?
				'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul>'+
				'<li><a href="/articles/myitems.cgi">My items</a></li>'+
				(us.auth(32768)?'<li><a href="/articles/adminitems.cgi">Admin items</a></li>':'')+
				'</ul></div>'
			:'';
	}); onSession(function (us) {
		var el=document.getElementById('CH_bb'); el.innerHTML='';
		if ( (us.auth(32768)) || ((us.uniqid=='Di3k92yv')&&(us.auth(128))) ) {
			el.appendChild(btn('Edit article','Edit this version of the article','edit','/articles/edit.cgi?a=iE86b7Xj'));
	
			if (us.auth(32768)) {
				el.appendChild(btn('Delete article','Delete this article','delete','javascript:artdel()'));
			}
	
		}
	});
	function artdel() { if (confirm('WARNING: You are about to delete this page. Confirm?')) window.location='/articles/delete.cgi?a=iE86b7Xj'; }
	ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>